## Plasma 观察者激励方案

在目前的 Plasma 方案中，用户需要每间隔一段时间对子链及主链状态进行检查才能保证他在子链中的资产安全。因此，很多方案都提出了使用观察者这一角色对整个系统的运行状况进行监控。而在设计观察者这一个角色时，我们发现一个悖论：我们希望通过观察者的监督让子链更安全、更稳定，但子链越安全观察者通过挑战的方式获取报酬就越少。本文将提出一个观察者的激励方案，以使观察者节点能从它尽职尽责的工作中得到收入。

### 存储证明

一个合格的观察者应当存储子链上所有的区块信息。我们将通过以下方式提供一种存储证明，来证明信息确实被存储在观察者的存储介质中：

1. 合约要求观察者提供指定的随机 `N` 个不同交易所形成的默克尔树根哈希
2. 观察者通过已存储的区块信息构造出合约要求的默克尔树根哈希并附上一定数量的 ETH 提交至合约
3. 在 `M` 个 ETH 区块内，任何其他观察者都可以对该观察者提出的默克尔树进行挑战，挑战需要向合约提供合约要求的完整的区块信息。若挑战成功，挑战者将得到该观察者所附上的 ETH 以及解答该问题本身应获得的奖励
4. 若在 `M` 个 ETH 区块内均没有其他观察者对该观察者进行挑战，该观察者将得到解答该问题的奖励

通过这种形式，我们可以从一定程度上确定观察者确实存有其观察的子链中所有的区块信息。我们可以称这个过程为存储证明。

### 奖励金

由于存储证明需要合约提供奖励金，因此目前的方案是由节点向合约提供并保持奖励金奖金池在一定的数量之上。我们将奖励池的奖金设定为不可提出，因此在奖励池中奖金较多时，用户对系统的稳定性会有较高的预期，因为一旦出现节点作恶，除了会被观察者及时发现外，节点在奖励池中的奖金也依然无法提出。

### 收入支出

在这样一个系统中，节点将得到交易手续费作为收入，观察者将得到奖励金作为收入，同时奖励金也是节点的支出。假设：

- `F1` 单笔交易手续费
- `F2` 单次奖励金
- `G1` 提交区块信息的 ETH 燃料费用
- `G2` 提交存储证明的 ETH 燃料费用
- `N1` 提交区块信息的 ETH 区块间隔数
- `N2` 提交存储证明的 ETH 区块间隔数
- `T` 每秒有效交易量
- `15` ETH 区块间隔秒数

所有节点每 `N1` 个 ETH 区块的总收入 `S1` 为：

```sql
S1 = 15 * T * N1 * F1 - (N1 / N2) * F2 - G1
```

所有观察者每 `N1` 个 ETH 区块的总收入 `S2` 为：

```sql
S2 = (N1 / N2) * F2 - G2
```

如果在系统正常运行时可以达到的最高 tps 为 `2**16 = 65535`，那么我们可以假设当系统在正常运行中：

- `2**8 = 1024` 每秒有效交易量
- `7` 节点数
- `100` 观察者数
- `$0.01` 单笔交易手续费
- `$100` 单次奖励金
- `$1` 提交区块信息的 ETH 燃料费用
- `$1` 提交存储证明的 ETH 燃料费用
- `40` 提交区块信息的 ETH 区块间隔数
- `10` 提交存储证明的 ETH 区块间隔数

每个节点的平均每月收入 `M1` 为：

```sql
M1 = S1 / 7 / N1 * 6 * 60 * 24 * 30
   = (15 * 1024 * 40 * 0.01 - (40 / 10) * 100 - 1) / 7 / 40 * 6 * 60 * 24 * 30
   = $5,316,377.14
```

每个观察者平均每月收入 `M2` 为：

```sql
M2 = S2 / 100 / N1 * 6 * 60 * 24 * 30
   = ((40 / 10) * 100 - 1) / 100 / 40 * 6 * 60 * 24 * 30
   = $25,855.20
```

由此可见，只要系统可以正常运行，无论是节点还是观察者都是有利可图的。